# 实现上传头像功能

## 1. 后端修改

### 1.1 修改用户模型
- 在 `server/src/storage/mod.rs` 的 `User` 结构体中添加 `avatar_url` 字段
- 用于存储用户头像的URL路径

### 1.2 修改数据库表
- 在 `server/src/storage/mod.rs` 的数据库初始化代码中，为 `users` 表添加 `avatar_url` 列
- 支持存储用户头像路径

### 1.3 添加API端点
- 在 `server/src/api/user.rs` 中添加头像上传API
- 支持接收图片文件并存储
- 返回头像URL给前端

### 1.4 添加获取头像API
- 添加获取用户头像的API端点
- 支持根据用户ID获取头像

## 2. 前端修改

### 2.1 修改用户信息显示
- 在 `Yueling/src/App.vue` 的用户信息部分添加头像显示
- 将当前的 Font Awesome 图标替换为实际头像图片

### 2.2 添加头像上传功能
- 在用户信息区域添加头像上传按钮
- 实现头像选择和上传功能
- 支持预览和替换头像

### 2.3 修改样式
- 在 `Yueling/src/styles.css` 中添加头像相关样式
- 支持头像的圆形显示和悬停效果

## 3. 实现步骤

1. 修改后端 `User` 模型，添加 `avatar_url` 字段
2. 修改数据库初始化，添加 `avatar_url` 列
3. 添加头像上传和获取的API端点
4. 修改前端用户信息显示，支持头像图片
5. 实现头像上传组件和功能
6. 添加相关样式支持

## 4. 技术要点

- 后端使用 Rust 的 Axum 框架处理文件上传
- 前端使用 Vue 3 的文件上传功能
- 头像存储在服务器本地，并返回相对URL给前端
- 支持图片格式验证和大小限制
- 实现头像的实时预览和更新